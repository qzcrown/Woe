# Woe

Woe æ˜¯ä¸€ä¸ªåŸºäº Cloudflare Workers çš„ Gotify æœåŠ¡ç«¯å®ç°ï¼Œæä¾›ç®€å•ã€å¯é çš„é€šçŸ¥æ¨é€æœåŠ¡ã€‚

## ç‰¹æ€§

- ğŸš€ åŸºäº Cloudflare Workersï¼Œå…¨çƒéƒ¨ç½²ï¼Œè‡ªåŠ¨æ‰©å±•
- ğŸ“± Gotify v2.0.2 å…¼å®¹ï¼Œæ”¯æŒç°æœ‰å®¢æˆ·ç«¯
- ğŸ” çµæ´»çš„è®¤è¯æœºåˆ¶ï¼Œæ”¯æŒå¤šç§ä»¤ç‰Œç±»å‹
- ğŸ“¨ å®æ—¶æ¶ˆæ¯æ¨é€ï¼ŒWebSocket æ”¯æŒ
- ğŸ”Œ æ’ä»¶ç³»ç»Ÿï¼Œæ”¯æŒåŠŸèƒ½æ‰©å±•
- ğŸ“Š å®Œæ•´çš„ RESTful API
- ğŸ–¼ï¸ å›¾ç‰‡å­˜å‚¨æ”¯æŒï¼ˆCloudflare R2ï¼‰
- ğŸŒ **å…¨æ–° Web UI ç•Œé¢** - åŸºäº Vue 3 çš„ç°ä»£åŒ–ç®¡ç†ç•Œé¢

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

åœ¨å¼€å§‹éƒ¨ç½²ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²å‡†å¤‡å¥½ä»¥ä¸‹å†…å®¹ï¼š

1. **Cloudflare è´¦æˆ·** - ç”¨äºéƒ¨ç½² Workerã€åˆ›å»º D1 æ•°æ®åº“å’Œ R2 å­˜å‚¨æ¡¶
2. **Node.js 18+** - ç”¨äºè¿è¡Œæ„å»ºè„šæœ¬å’Œ Wrangler CLI
3. **Wrangler CLI** - Cloudflare Workers å‘½ä»¤è¡Œå·¥å…·
4. **Git** - ç”¨äºå…‹éš†ä»£ç ä»“åº“

### éƒ¨ç½²æŒ‡å—

Woe æ”¯æŒä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼šç›´æ¥ä»åŸä»“åº“éƒ¨ç½²ï¼Œæˆ– Fork åéƒ¨ç½²åˆ°è‡ªå·±çš„è´¦æˆ·ã€‚

#### æ–¹æ³•ä¸€ï¼šç›´æ¥ä»åŸä»“åº“éƒ¨ç½²

å¦‚æœæ‚¨åªæ˜¯æƒ³å¿«é€Ÿä½“éªŒ Woeï¼Œå¯ä»¥ç›´æ¥ä»åŸä»“åº“éƒ¨ç½²ï¼š

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/qzcrown/woe.git
cd woe

# 2. å®‰è£…ä¾èµ–
npm install
npm run setup:frontend  # å®‰è£…å‰ç«¯ä¾èµ–

# 3. ç™»å½• Cloudflareï¼ˆå¦‚æœå°šæœªç™»å½•ï¼‰
wrangler login

# 4. åˆ›å»º Cloudflare èµ„æº
# åˆ›å»º D1 æ•°æ®åº“
wrangler d1 create woe-db

# åˆ›å»º R2 å­˜å‚¨æ¡¶
wrangler r2 bucket create woe-storage

# 5. é…ç½®é¡¹ç›®
# å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶
cp example.wrangler.toml wrangler.toml

# ç¼–è¾‘ wrangler.tomlï¼Œæ›´æ–°ä»¥ä¸‹é…ç½®ï¼š
# - database_id: ä»æ­¥éª¤4çš„è¾“å‡ºä¸­è·å–
# - bucket_name: å¯è‡ªå®šä¹‰æˆ–ä½¿ç”¨é»˜è®¤å€¼
# - è·¯ç”±é…ç½®ï¼ˆå¦‚ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼‰

# 6. æ„å»ºå‰ç«¯
npm run build:frontend

# 7. éƒ¨ç½²åˆ° Cloudflare Workers
npm run deploy
```

#### æ–¹æ³•äºŒï¼šFork åéƒ¨ç½²ï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰

å¦‚æœæ‚¨è®¡åˆ’é•¿æœŸä½¿ç”¨æˆ–è‡ªå®šä¹‰ Woeï¼Œå»ºè®® Fork ä»“åº“åˆ°è‡ªå·±çš„ GitHub è´¦æˆ·åå†éƒ¨ç½²ï¼š

1. **Fork ä»“åº“**
   - è®¿é—® https://github.com/qzcrown/woe
   - ç‚¹å‡»å³ä¸Šè§’ "Fork" æŒ‰é’®ï¼Œåˆ›å»ºæ‚¨è‡ªå·±çš„å‰¯æœ¬

2. **å…‹éš†æ‚¨çš„ Fork**
   ```bash
   git clone https://github.com/æ‚¨çš„ç”¨æˆ·å/woe.git
   cd woe
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   npm run setup:frontend
   ```

4. **é…ç½® Cloudflare èµ„æº**
   ```bash
   # ç™»å½• Cloudflareï¼ˆä½¿ç”¨æ‚¨çš„è´¦æˆ·ï¼‰
   wrangler login

   # åˆ›å»º D1 æ•°æ®åº“ï¼ˆåç§°å¯è‡ªå®šä¹‰ï¼‰
   wrangler d1 create woe-db

   # åˆ›å»º R2 å­˜å‚¨æ¡¶ï¼ˆåç§°å¯è‡ªå®šä¹‰ï¼‰
   wrangler r2 bucket create woe-storage
   ```

5. **æ›´æ–°é…ç½®æ–‡ä»¶**
   ```bash
   # å¤åˆ¶ç¤ºä¾‹é…ç½®
   cp example.wrangler.toml wrangler.toml

   # ç¼–è¾‘ wrangler.tomlï¼Œå¿…é¡»ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š
   # - database_id: æ›¿æ¢ä¸ºæ­¥éª¤4ä¸­åˆ›å»ºçš„æ•°æ®åº“ID
   # - database_name: å¯ä¿æŒé»˜è®¤æˆ–è‡ªå®šä¹‰
   # - bucket_name: å¯ä¿æŒé»˜è®¤æˆ–è‡ªå®šä¹‰
   # - è·¯ç”±é…ç½®: å¦‚ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œæ›´æ–° pattern å­—æ®µ
   # - ç¯å¢ƒå˜é‡: å»ºè®®ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 
   ```

6. **æ„å»ºå’Œéƒ¨ç½²**
   ```bash
   # æ„å»ºå‰ç«¯
   npm run build:frontend

   # éƒ¨ç½²åˆ° Cloudflare Workers
   npm run deploy
   ```

#### éªŒè¯éƒ¨ç½²æˆåŠŸ

éƒ¨ç½²å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

1. **è®¿é—® Worker åŸŸå**
   ```
   https://æ‚¨çš„Workeråç§°.æ‚¨çš„è´¦æˆ·.workers.dev/
   ```
   æˆ–æ‚¨çš„è‡ªå®šä¹‰åŸŸåã€‚

2. **ä½¿ç”¨é»˜è®¤å‡­æ®ç™»å½•**
   - ç”¨æˆ·åï¼š`admin`
   - å¯†ç ï¼š`password`
   - **é‡è¦**ï¼šç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

3. **æ£€æŸ¥ç³»ç»ŸçŠ¶æ€**
   ```bash
   # æ£€æŸ¥å¥åº·çŠ¶æ€
   curl https://æ‚¨çš„åŸŸå/health

   # æ£€æŸ¥ç‰ˆæœ¬ä¿¡æ¯
   curl https://æ‚¨çš„åŸŸå/version
   ```

### è¯¦ç»†é…ç½®æŒ‡å—

Woe ä½¿ç”¨ `wrangler.toml` ä½œä¸ºä¸»è¦é…ç½®æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯å…³é”®é…ç½®é¡¹çš„è¯¦ç»†è¯´æ˜ï¼š

#### Cloudflare èµ„æºé…ç½®

##### D1 æ•°æ®åº“é…ç½®
```toml
[[d1_databases]]
binding = "DB"  # åœ¨ä»£ç ä¸­ä½¿ç”¨çš„ç»‘å®šåç§°
database_name = "woe-db"  # æ•°æ®åº“æ˜¾ç¤ºåç§°
database_id = "your-database-id"  # å¿…é¡»ä¿®æ”¹ï¼šè¿è¡Œ `wrangler d1 create woe-db` è·å–
```

##### R2 å­˜å‚¨æ¡¶é…ç½®
```toml
[[r2_buckets]]
binding = "R2"  # åœ¨ä»£ç ä¸­ä½¿ç”¨çš„ç»‘å®šåç§°
bucket_name = "woe-storage"  # å­˜å‚¨æ¡¶åç§°ï¼Œå¯è‡ªå®šä¹‰
```

#### è·¯ç”±é…ç½®

##### ä½¿ç”¨ workers.dev åŸŸå
```toml
workers_dev = true  # å¯ç”¨ workers.dev åŸŸå
```

##### ä½¿ç”¨è‡ªå®šä¹‰åŸŸå
```toml
workers_dev = false  # ç¦ç”¨ workers.dev åŸŸå

[[routes]]
pattern = "your-domain.com"  # æ‚¨çš„è‡ªå®šä¹‰åŸŸå
custom_domain = true
```

#### ç¯å¢ƒå˜é‡é…ç½®
```toml
[vars]
ENVIRONMENT = "production"  # ç¯å¢ƒæ ‡è¯†ï¼šdevelopment, production
VERSION = "1.0.0"  # ç‰ˆæœ¬å·
DEFAULT_ADMIN_USER = "admin"  # é¦–æ¬¡ç™»å½•ç”¨æˆ·å
DEFAULT_ADMIN_PASSWORD = "password"  # é¦–æ¬¡ç™»å½•å¯†ç ï¼ˆéƒ¨ç½²åç«‹å³ä¿®æ”¹ï¼ï¼‰
REGISTRATION = false  # æ˜¯å¦å¼€æ”¾ç”¨æˆ·æ³¨å†Œï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®è®¾ä¸º false
```

#### é™æ€èµ„æºç»‘å®š
```toml
[assets]
directory = "./public"  # å‰ç«¯æ„å»ºè¾“å‡ºç›®å½•
binding = "ASSETS"  # åœ¨ä»£ç ä¸­ä½¿ç”¨çš„ç»‘å®šåç§°
```

#### Fork åå¿…é¡»ä¿®æ”¹çš„é…ç½®é¡¹

å¦‚æœæ‚¨ Fork äº†ä»“åº“ï¼Œå¿…é¡»ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

1. **`database_id`** - æ›¿æ¢ä¸ºæ‚¨è‡ªå·±åˆ›å»ºçš„ D1 æ•°æ®åº“ ID
2. **`bucket_name`** - å¯è‡ªå®šä¹‰æˆ–ä½¿ç”¨æ‚¨åˆ›å»ºçš„ R2 å­˜å‚¨æ¡¶åç§°
3. **è·¯ç”±é…ç½®** - æ›´æ–°ä¸ºæ‚¨è‡ªå·±çš„åŸŸåæˆ– workers.dev åŸŸå
4. **ç¯å¢ƒå˜é‡** - ç‰¹åˆ«æ˜¯ `DEFAULT_ADMIN_PASSWORD`ï¼Œå»ºè®®ä½¿ç”¨å¼ºå¯†ç 

#### è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ç¤ºä¾‹

åˆ›å»º `deploy.sh` è„šæœ¬ç®€åŒ– Fork åéƒ¨ç½²ï¼š

```bash
#!/bin/bash
# deploy.sh - Woe Fork åè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º

echo "ğŸš€ å¼€å§‹éƒ¨ç½² Woe..."

# æ£€æŸ¥ä¾èµ–
command -v wrangler >/dev/null 2>&1 || {
    echo "âŒ è¯·å…ˆå®‰è£… wrangler: npm install -g wrangler"
    exit 1
}

# ç™»å½• Cloudflareï¼ˆå¦‚æœå°šæœªç™»å½•ï¼‰
echo "ğŸ”‘ æ£€æŸ¥ Cloudflare ç™»å½•çŠ¶æ€..."
wrangler whoami || {
    echo "è¯·ç™»å½• Cloudflare..."
    wrangler login
}

# åˆ›å»º D1 æ•°æ®åº“
echo "ğŸ—„ï¸  åˆ›å»º D1 æ•°æ®åº“..."
DB_INFO=$(wrangler d1 create woe-db)
DATABASE_ID=$(echo "$DB_INFO" | grep -o 'database_id: "[^"]*"' | cut -d'"' -f2)

# åˆ›å»º R2 å­˜å‚¨æ¡¶
echo "ğŸ“¦ åˆ›å»º R2 å­˜å‚¨æ¡¶..."
wrangler r2 bucket create woe-storage

# æ›´æ–°é…ç½®æ–‡ä»¶
echo "âš™ï¸  æ›´æ–°é…ç½®æ–‡ä»¶..."
cp example.wrangler.toml wrangler.toml
sed -i "s/database_id = \".*\"/database_id = \"$DATABASE_ID\"/" wrangler.toml

echo "âœ… é…ç½®å®Œæˆï¼"
echo "ğŸ“ è¯·æ£€æŸ¥ wrangler.toml æ–‡ä»¶ï¼Œæ ¹æ®éœ€è¦ä¿®æ”¹å…¶ä»–é…ç½®ã€‚"
echo "ğŸš€ è¿è¡Œä»¥ä¸‹å‘½ä»¤å®Œæˆéƒ¨ç½²ï¼š"
echo "   npm run build:frontend"
echo "   npm run deploy"
```

### æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜

##### Q1: éƒ¨ç½²å¤±è´¥ï¼Œæ˜¾ç¤ºæ•°æ®åº“è¿æ¥é”™è¯¯
- **åŸå› **ï¼š`database_id` é…ç½®ä¸æ­£ç¡®æˆ–æ•°æ®åº“ä¸å­˜åœ¨
- **è§£å†³**ï¼š
  1. è¿è¡Œ `wrangler d1 list` æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨
  2. ç¡®è®¤ `wrangler.toml` ä¸­çš„ `database_id` æ­£ç¡®
  3. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å±äºå½“å‰ç™»å½•çš„ Cloudflare è´¦æˆ·

##### Q2: å‰ç«¯èµ„æºåŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤º 404 é”™è¯¯
- **åŸå› **ï¼šå‰ç«¯æœªæ„å»ºæˆ–æ„å»ºæ–‡ä»¶ä½ç½®ä¸æ­£ç¡®
- **è§£å†³**ï¼š
  1. ç¡®è®¤å·²è¿è¡Œ `npm run build:frontend`
  2. æ£€æŸ¥ `public` ç›®å½•æ˜¯å¦æœ‰æ„å»ºæ–‡ä»¶
  3. éªŒè¯ `wrangler.toml` ä¸­çš„ `[assets]` é…ç½®

##### Q3: æ— æ³•ç™»å½•ï¼Œæ˜¾ç¤ºè®¤è¯å¤±è´¥
- **åŸå› **ï¼šé»˜è®¤ç®¡ç†å‘˜å‡­æ®ä¸æ­£ç¡®æˆ–æ•°æ®åº“æœªåˆå§‹åŒ–
- **è§£å†³**ï¼š
  1. ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„é»˜è®¤å‡­æ®ï¼š`admin` / `password`
  2. æŸ¥çœ‹ Worker æ—¥å¿—ï¼š`wrangler tail`
  3. æ£€æŸ¥æ•°æ®åº“è¿ç§»æ˜¯å¦æˆåŠŸæ‰§è¡Œ

##### Q4: è‡ªå®šä¹‰åŸŸåæ— æ³•è®¿é—®
- **åŸå› **ï¼šDNS é…ç½®ä¸æ­£ç¡®æˆ–è·¯ç”±é…ç½®é”™è¯¯
- **è§£å†³**ï¼š
  1. ç¡®è®¤ Cloudflare DNS ä¸­å·²æ·»åŠ  CNAME è®°å½•æŒ‡å‘ Workers
  2. æ£€æŸ¥ `wrangler.toml` ä¸­çš„è·¯ç”±é…ç½®
  3. è¿è¡Œ `wrangler deployments` æŸ¥çœ‹æœ€æ–°éƒ¨ç½²çŠ¶æ€

#### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
wrangler tail

# æŸ¥çœ‹ç‰¹å®šæ—¶é—´æ®µçš„æ—¥å¿—
wrangler tail --format=json

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
wrangler tail | grep -i error
```

#### è°ƒè¯•æŠ€å·§
1. **æœ¬åœ°å¼€å‘æµ‹è¯•**ï¼šå…ˆä½¿ç”¨ `npm run dev` åœ¨æœ¬åœ°æµ‹è¯•
2. **åˆ†æ­¥éªŒè¯**ï¼šæŒ‰éƒ¨ç½²æ­¥éª¤é€æ­¥éªŒè¯æ¯ä¸ªç¯èŠ‚
3. **ç¯å¢ƒå˜é‡æ£€æŸ¥**ï¼šç¡®è®¤æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡å·²æ­£ç¡®è®¾ç½®
4. **æ•°æ®åº“è¿ç§»çŠ¶æ€**ï¼šæ£€æŸ¥æ•°æ®åº“è¡¨ç»“æ„æ˜¯å¦æ­£ç¡®åˆ›å»º

### å¤šè¯­è¨€æ”¯æŒ

Woe å‰ç«¯ç•Œé¢æ”¯æŒå¤šè¯­è¨€åˆ‡æ¢ï¼Œç›®å‰åŒ…å«ï¼š

- **ç®€ä½“ä¸­æ–‡ (zh-CN)** - é»˜è®¤è¯­è¨€
- **è‹±æ–‡ (en-US)** - å¤‡ç”¨è¯­è¨€

#### è¯­è¨€åˆ‡æ¢æ–¹å¼
1. **è‡ªåŠ¨æ£€æµ‹**ï¼šæ ¹æ®æµè§ˆå™¨è¯­è¨€è®¾ç½®è‡ªåŠ¨é€‰æ‹©
2. **æ‰‹åŠ¨åˆ‡æ¢**ï¼šåœ¨ Web UI è®¾ç½®ä¸­é€‰æ‹©åå¥½è¯­è¨€
3. **æŒä¹…åŒ–å­˜å‚¨**ï¼šé€‰æ‹©çš„è¯­è¨€ä¼šä¿å­˜åœ¨æœ¬åœ°å­˜å‚¨ä¸­

#### ä¸ºæ‚¨çš„è¯­è¨€è´¡çŒ®ç¿»è¯‘
æ¬¢è¿ä¸º Woe æ·»åŠ æ›´å¤šè¯­è¨€æ”¯æŒï¼ç¿»è¯‘æ–‡ä»¶ä½äºï¼š
```
frontend/src/locales/
â”œâ”€â”€ zh-CN.ts  # ç®€ä½“ä¸­æ–‡
â””â”€â”€ en-US.ts  # è‹±æ–‡
```

### åŸºæœ¬ä½¿ç”¨

#### 1. é¦–æ¬¡ç™»å½•å’Œè®¾ç½®

éƒ¨ç½²åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼š

**é»˜è®¤ç®¡ç†å‘˜å‡­æ®ï¼š**
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`password`

**Web UI ç™»å½•ï¼š**
1. è®¿é—® `https://your-worker-domain.workers.dev/`
2. ä½¿ç”¨ `admin:password` ç™»å½•
3. ç™»å½•åå»ºè®®ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç 

**API è®¤è¯ï¼š**
```bash
# ä½¿ç”¨é»˜è®¤ç®¡ç†å‘˜å‡­æ®è¿›è¡Œ API è®¤è¯
curl -u "admin:password" \
  -X GET https://your-domain.workers.dev/api/v1/current/user
```

#### 2. åˆ›å»ºåº”ç”¨

```bash
# 1. åˆ›å»ºå®¢æˆ·ç«¯ä»¤ç‰Œ
CLIENT_RESPONSE=$(curl -s -u "admin:password" \
  -X POST https://your-domain.workers.dev/client \
  -H "Content-Type: application/json" \
  -d '{"name": "My First Client"}')

CLIENT_TOKEN=$(echo $CLIENT_RESPONSE | jq -r '.token')

# 2. ä½¿ç”¨å®¢æˆ·ç«¯ä»¤ç‰Œåˆ›å»ºåº”ç”¨
curl -X POST https://your-domain.workers.dev/application \
  -H "Content-Type: application/json" \
  -H "X-Gotify-Key: $CLIENT_TOKEN" \
  -d '{"name": "My App", "description": "æµ‹è¯•åº”ç”¨"}'
```

#### 3. å‘é€æ¶ˆæ¯

```bash
curl -X POST https://your-domain.workers.dev/message \
  -H "Content-Type: application/json" \
  -H "X-Gotify-Key: your-app-token" \
  -d '{"title": "Hello", "message": "World", "priority": 5}'
```

## æ–‡æ¡£

### API æ–‡æ¡£
- [API æ¦‚è¿°](docs/api/README.md) - API ä½¿ç”¨æŒ‡å—å’Œå¿«é€Ÿå…¥é—¨
- [è®¤è¯æœºåˆ¶](docs/api/authentication.md) - è¯¦ç»†çš„è®¤è¯è¯´æ˜
- [OpenAPI è§„èŒƒ](docs/api/openapi.yaml) - å®Œæ•´çš„ API è§„èŒƒ

### ç«¯ç‚¹æ–‡æ¡£
- [ç³»ç»Ÿç«¯ç‚¹](docs/api/endpoints/system.md) - å¥åº·æ£€æŸ¥ã€ç‰ˆæœ¬ä¿¡æ¯ã€WebSocket
- [ç”¨æˆ·ç®¡ç†](docs/api/endpoints/users.md) - ç”¨æˆ·åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤
- [åº”ç”¨ç®¡ç†](docs/api/endpoints/applications.md) - åº”ç”¨å’Œä»¤ç‰Œç®¡ç†
- [å®¢æˆ·ç«¯ç®¡ç†](docs/api/endpoints/clients.md) - å®¢æˆ·ç«¯è®¾å¤‡ç®¡ç†
- [æ¶ˆæ¯ç®¡ç†](docs/api/endpoints/messages.md) - æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
- [æ’ä»¶ç®¡ç†](docs/api/endpoints/plugins.md) - æ’ä»¶é…ç½®å’Œç®¡ç†
- [WebSocket æµ](docs/api/endpoints/websocket.md) - å®æ—¶æ¶ˆæ¯æ¨é€

### å¼€å‘æ–‡æ¡£
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—) - è¯¦ç»†çš„éƒ¨ç½²è¯´æ˜ï¼ˆæœ¬æ–‡æ¡£å†…ï¼‰
- [å¼€å‘è®¡åˆ’](docs/gotify-cloudflare-worker-dev-plan.md) - å¼€å‘è§„åˆ’å’Œè®¾è®¡

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å®¢æˆ·ç«¯åº”ç”¨    â”‚â”€â”€â”€â”€â”‚  Cloudflare     â”‚â”€â”€â”€â”€â”‚   åº”ç”¨æœåŠ¡å™¨    â”‚
â”‚                 â”‚    â”‚    Workers      â”‚    â”‚                 â”‚
â”‚ â€¢ ç§»åŠ¨åº”ç”¨      â”‚    â”‚                 â”‚    â”‚ â€¢ ç›‘æ§è„šæœ¬      â”‚
â”‚ â€¢ æ¡Œé¢å®¢æˆ·ç«¯    â”‚    â”‚ â€¢ RESTful API   â”‚    â”‚ â€¢ CI/CD å·¥å…·    â”‚
â”‚ â€¢ Web ç•Œé¢      â”‚    â”‚ â€¢ WebSocket     â”‚    â”‚ â€¢ è‡ªåŠ¨åŒ–ä»»åŠ¡    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â€¢ è®¤è¯æˆæƒ      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ â€¢ æ¶ˆæ¯è·¯ç”±      â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚  Cloudflare     â”‚
                       â”‚  D1 + R2        â”‚
                       â”‚                 â”‚
                       â”‚ â€¢ ç”¨æˆ·æ•°æ®      â”‚
                       â”‚ â€¢ æ¶ˆæ¯å­˜å‚¨      â”‚
                       â”‚ â€¢ å›¾ç‰‡æ–‡ä»¶      â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è®¤è¯æœºåˆ¶

Woe æ”¯æŒå¤šç§è®¤è¯æ–¹å¼ï¼š

- **åº”ç”¨ä»¤ç‰Œ (appToken)** - ç”¨äºå‘é€æ¶ˆæ¯
- **å®¢æˆ·ç«¯ä»¤ç‰Œ (clientToken)** - ç”¨äºæ¥æ”¶æ¶ˆæ¯å’Œç®¡ç†
- **Basic Auth** - ç”¨äºåˆå§‹è®¾ç½®

è®¤è¯æ–¹å¼ï¼š
- Header: `X-Gotify-Key: your-token`
- Bearer: `Authorization: Bearer your-token`
- æŸ¥è¯¢å‚æ•°: `?token=your-token`

## æ¶ˆæ¯ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | çº§åˆ« | æè¿° |
|--------|------|------|
| 0-2 | ä½ | ä¿¡æ¯ç±»æ¶ˆæ¯ |
| 3-5 | ä¸­ç­‰ | é€šçŸ¥ç±»æ¶ˆæ¯ |
| 6-8 | é«˜ | è­¦å‘Šç±»æ¶ˆæ¯ |
| 9-10 | ç´§æ€¥ | ç´§æ€¥ç±»æ¶ˆæ¯ |

## å®¢æˆ·ç«¯æ”¯æŒ

### å®˜æ–¹å®¢æˆ·ç«¯
- [Gotify Android](https://github.com/gotify/android)
- [Gotify iOS](https://github.com/gotify/ios)

### ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯
- [Gotify CLI](https://github.com/gotify/cli)
- [å„ç§è¯­è¨€åº“](https://gotify.net/docs/libraries)

## Web UI ç•Œé¢

Woe ç°åœ¨åŒ…å«ä¸€ä¸ªåŸºäº Vue 3 çš„ç°ä»£åŒ– Web ç®¡ç†ç•Œé¢ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

### ä¸»è¦åŠŸèƒ½

- **ğŸ  ä»ªè¡¨æ¿** - ç³»ç»Ÿæ¦‚è§ˆã€å®æ—¶ç»Ÿè®¡ã€æœ€è¿‘æ¶ˆæ¯
- **ğŸ“¨ æ¶ˆæ¯ç®¡ç†** - å®æ—¶æ¶ˆæ¯æŸ¥çœ‹ã€åˆ é™¤ã€WebSocket å®æ—¶æ›´æ–°
- **ğŸ‘¥ ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
- **ğŸ“± åº”ç”¨ç®¡ç†** - åº”ç”¨åˆ›å»ºã€ä»¤ç‰Œç®¡ç†ã€ä¼˜å…ˆçº§è®¾ç½®
- **ğŸ’» å®¢æˆ·ç«¯ç®¡ç†** - å®¢æˆ·ç«¯è®¾å¤‡ç®¡ç†ã€ä»¤ç‰Œå¤åˆ¶
- **ğŸ” è®¤è¯ç³»ç»Ÿ** - å®‰å…¨ç™»å½•ã€ä¼šè¯ç®¡ç†

### è®¿é—® Web UI

éƒ¨ç½²åï¼Œè®¿é—®æ‚¨çš„ Worker åŸŸåå³å¯æ‰“å¼€ Web UIï¼š
```
https://your-worker-domain.workers.dev/
```

### æœ¬åœ°å¼€å‘ Web UI

```bash
# å‰ç«¯å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev:frontend

# åç«¯å¼€å‘æ¨¡å¼
npm run dev
```

## å¼€å‘

### æœ¬åœ°å¼€å‘

1. å®‰è£…ä¾èµ–
```bash
npm install
npm run setup:frontend  # å®‰è£…å‰ç«¯ä¾èµ–
```

2. é…ç½®æœ¬åœ°ç¯å¢ƒ
```bash
cp example.wrangler.toml wrangler.toml
# ç¼–è¾‘ wrangler.toml é…ç½®æ•°æ®åº“å’Œå­˜å‚¨
```

3. æœ¬åœ°è¿è¡Œ
```bash
# å¼€å‘æ¨¡å¼ï¼ˆä»…åç«¯ï¼‰
npm run dev

# åŒæ—¶è¿è¡Œå‰åç«¯
npm run dev:frontend  # ç»ˆç«¯1 - å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev           # ç»ˆç«¯2 - åç«¯ Worker
```

### æ„å»ºå’Œéƒ¨ç½²

```bash
# æ„å»ºå‰ç«¯
npm run build:frontend

# éƒ¨ç½²
npm run deploy
```

### è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

[MIT License](LICENSE)

## ç›¸å…³é“¾æ¥

- [Gotify å®˜ç½‘](https://gotify.net/)
- [Cloudflare Workers](https://workers.cloudflare.com/)
- [é¡¹ç›® GitHub](https://github.com/qzcrown/woe)
